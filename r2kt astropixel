/*****
 * Astropixels example sketch modified for:
 *  - Front PSI: kPurple swipe
 *  - Rear  PSI: kPink swipe
 */

#include "ReelTwo.h"
#include "dome/Logics.h"
#include "dome/LogicEngineController.h"
#include "dome/HoloLights.h"
#include "dome/NeoPSI.h"
#include "i2c/I2CReceiver.h"

I2CReceiver i2cReceiver(0x0a);

// ------------------ LOGICS ------------------

static LogicEngineSettings LogicEngineCustom(
    LogicEngineDefaults::FRONT_FADE,
    220,  // your custom hue for the logics
    LogicEngineDefaults::FRONT_DELAY,
    2,
    LogicEngineDefaults::FRONT_BRI,
    LogicEngineDefaults::sequence(LogicEngineDefaults::NORMAL));

AstroPixelRLD<> RLD(LogicEngineCustom, 3);
AstroPixelFLD<> FLD(LogicEngineCustom, 1);

// ------------------ PSIs (Swipes) ------------------

// Front PSI: swipe using kPurple palette
static LogicEngineSettings LogicEngineFrontPSICustom(
    LogicEngineDefaults::FRONT_FADE,
    LogicEngineDefaults::FRONT_HUE,
    LogicEngineDefaults::FRONT_DELAY,
    LogicEngineDefaults::FRONT_PSI_PAL,
    LogicEngineDefaults::FRONT_BRI,
    LogicEngineDefaults::sequence(LogicEngineDefaults::PSICOLORWIPE,
                                  LogicEngineDefaults::kPink));

// Rear PSI: swipe using kPink palette
static LogicEngineSettings LogicEngineRearPSICustom(
    LogicEngineDefaults::REAR_FADE,
    LogicEngineDefaults::REAR_HUE,
    LogicEngineDefaults::REAR_DELAY,
    LogicEngineDefaults::REAR_PSI_PAL,
    LogicEngineDefaults::REAR_BRI,
    LogicEngineDefaults::sequence(LogicEngineDefaults::PSICOLORWIPE,
                                  LogicEngineDefaults::kGreen));

AstroPixelFrontPSI<> frontPSI(LogicEngineFrontPSICustom, 4);
AstroPixelRearPSI<>  rearPSI(LogicEngineRearPSICustom, 5);

// ------------------ HOLOs ------------------

HoloLights frontHolo(25, HoloLights::kRGB);
HoloLights rearHolo(26, HoloLights::kRGB);
HoloLights topHolo(27, HoloLights::kRGB);

void setup()
{
    REELTWO_READY();
    SetupEvent::ready();

    // Scroll pink ID text for 15 seconds
    RLD.selectScrollTextLeft("... QT KT 43 ....", LogicEngineRenderer::kPink, 1, 15);
    FLD.selectScrollTextLeft("... QT KT 43 ...",  LogicEngineRenderer::kPink, 1, 15);

    // Holo brightness example command â€” optional
    CommandEvent::process("HPA0026|20");
}

void loop()
{
    AnimatedEvent::process();
}
